
Message :	代码：getDefaultQMSubCount,对象：hostname:mq.boh.hwwt2.comqueueManagerName:QM_RSC1port:3301channel:SERVERCHANNELCCSID:1208，错误描述：MQJE001: 完成代码为“2”，原因为“2033”。
--------------------------------------------------------------------------------
com.ibm.mq.MQException: MQJE001: 完成代码为“2”，原因为“2033”。
	at com.ibm.mq.MQDestination.getInt(MQDestination.java:666)
	at com.ibm.mq.MQDestination.get(MQDestination.java:465)
	at com.ibm.mq.pcf.PCFMessageAgent.send(PCFMessageAgent.java:197)
guest-0594692/tqbo0788
	at com.yum.boh.fund.api.ds.mq.MQTransInterface.getDefaultQMSubCount(MQTransInterface.java:92)
	at com.yum.boh.fund.api.ds.DataServiceApi.sendFileToStores4Large(DataServiceApi.java:915)
	at com.yum.boh.fund.api.ds.DataServiceApi.sendFileToStores4Large(DataServiceApi.java:832)
	at com.yum.boh.bmpdev.util.TaskTools.sendVersionToStoresForLarge(TaskTools.java:838)
	at com.yum.boh.bmpdev.service.task.SendUpgradeTaskThread.sendUpgradeTask(SendUpgradeTaskThread.java:168)
	at com.yum.boh.bmpdev.service.task.SendUpgradeTaskThread.run(SendUpgradeTaskThread.java:122)

	Unsupported major.minor version 51.0

1、杨宇的工作安排事宜。epqc的列锁定的事宜。
2、伙伴看一下现存的那么多订阅是什么内容，是否能够删掉
3、UP的APPID是干嘛的？为什么是目标发到目标？
4、试一试大胖子的DP转接头能否使用？
5、方超要在打印任务单的地方增加error级别的日志。

6、和靳贵娜讨论一下脚本刷库的流程进入jira的事宜。
7、明天早上让饶莎再综合测一遍。

8、总部端需哟修改的地方：
	a 给某一个版本设定为“全国使用版本”，设置完以后，将全国所有认领过但是未做初始化的餐厅的认领版本设为该版本。在上传版本界面中提示一个“请将上一个版本置为最新版本”。
	b 认领餐厅的版本下拉框拉出的默认版本就是全国使用版本的倒序排列，默认排在第一个的就是最新的全国使用版本。
9、回一个邮件阐述一下什么叫空转成功。
10、在餐厅端的duty首页上有一个连接可以连接到训练平台，将psid传到训练平台上去，由训练平台记录该用户的信息。
11、年投入量产5个新产品，并占40%以上的消费份额


12、明天看看这些新加的MQ日志的代码能否上到总部端生产环境去试一下。
如下代码加了很多日志，要记得改回来
	a DSAPI.java的sendFileToStores4Large函数
	b MQTrans4LargeThread.java 的 run函数
	c MQTransInterface.java 的 run函数

1、本周五严勇来会review storeportal的内容，所以孙国卿周五之前要做出来哦。
2、下周三提交餐厅初始化流程变更的功能。
3、知识库的外网访问要尽快让yum能访问到。
4、IMS和CMS对于数据上传的要求（POS、CASH、FCST）。
5、
报销

1、发邮件告诉大家薛亮要做的培训。

1、秀山数据的问题。
2、回薛良之前卡的邮件

1、和王雯说慰问的事情
2、1、秀山数据的问题。9-11

1、王君健的临时版本有没有合到PE库中？
2、王君健要发邮件给YUM说明问题。
3、费翔的RGMServer上的小功能编译一下放入标准目录。
4、杨宇巡店工具的修改。
5、
versionCodeDisplay
修改方案：
a 由于版本列表中的“设定兼容版本”功能已经没有意义，因此此功能改为“设置认领版本”，同时被设置为认领版本的那条显示为“全国认领版本”。
b 全国认领版本和其他版本应该是互斥关系，所有的版本列表中只能有一个全国认领版本。
c 设置完成后，将所有已经认领，但是还未完成初始化餐厅的认领版本设置为这个版本。
d 设置完成后，在进入认领版本界面时，默认选中的就是这个认领版本，但是当这个版本并不在该餐厅所属的市场IT范围内时，依然显示“请选择版本”。
e 检查更新的逻辑不变，还是使用该餐厅被认领的版本作为该餐厅应该升级的版本。

http://172.31.79.150:8080/zabbix/2gzmmain.php

@润和-刘辉 千次预估偏小、锅里的库存：费翔解决了千次偏少的问题；
@润和-方超 MPC实际小时显示为0：计划任务执行异常，过了0925就正常了
@润和-李明辉 日排程出计划过早的问题：李明辉已经解释过了
@顾凯 负库存存在没有删的问题：负库存脚本要重新刷，要发版本
@费翔 热豆浆的问题：同千次预估偏少的问题。

1、Action是单例吗？

0、SHA219的Agent停止：经过分析，可能是由于一个潜在的Agent的bug，会导致在POS离线检测异常时导致失败，王敬已经开bug跟踪。
1、WHN354的问题POS和epqc的问题：POS由于早上巡店开始时还没有进单，epqc的问还在分析中。
2、SZH196系统卡：看zabbix记录，在早上11点左右确实资源占用比较高，但半小时后恢复正常，我们要持续分析日志来确定具体情况。
3、TJN170经常卡顿：TJN170的zabbix记录非常异常，完全不像是一个正常的异常情况。据日志分析，TJN170从昨天晚上开始，机器完全卡死（和关机一样），今天早上0945机器才重启，现在已经补出epqc的计划。但从BOH2G的各进程的日志分析，并不是2GBOH的进程卡死了机器，因为所有的日志都指向0945机器才重启。
4、凯进店出现两套计划：是一个bug，方超已经在YSN回过具体原因了。
5、WHN273没有POS售卖的问题：经查可能是1G的xml文件拷贝的问题，请YUM确认1G正常。


10月份：
1、和刘辉商量一下对于库存表总是被锁住的处理。
2、评估一下几个从1分钟改成30秒的计划任务的必要性。
3、夜里经常出现的could not get jdbc connection的错误的真正原因，现在出现的越来越多了。

1、王欣发现的一个库存追加的sql的bug有没有跟踪到，原因是什么？，有没有放入升级包和全量升级包
2、获取不到jdbc连接的专题  观察一下：StoreTempletMapper.xml
3、库存扣不准的专题
4、POS的导入计划任务也要加锁的问题，不仅仅是要靠什么guid不能重复来校验
5、确认一下这些新上的餐厅的那个标志位的问题。
6、确认一下我们现在餐厅端postgre的最大连接上限
7、KHN023计划未生成
8、相关可疑餐厅加入巡店列表中
9、跟踪一下凯进的epqc计划任务执行时间，看看几个30秒的计划任务改成60秒后，性能有没有明显的改善	有改善，大约提升了2~3小时的性能

SZH196\QGD095\KHN023	
TJN464 数据库连不上	

KHN023：夜里0321看门狗将其重启，原因是计划任务停止响应看门狗的请求，同时夜里0315左右也报了无法获取jdbc连接的错误
SZH196：夜里三点左右出现无法获取数据库连接；但是数据库后来被看门狗恢复了，但是预估已经失败
QGD095：就是单纯的数据库执行速度慢，直到今天早上1230才执行完毕epqc的预估；而昨天的数据库备份也是大约0630才完成的

1、修改两个POS的计划任务，加锁
2、修改epqc的getStoreinfo接口，利用缓存
3、修改看门狗的数据库连接方式为只连接，不select
4、StoreInfoTemplet.getxxxx的修改?
5、修改postgre的检查点事件：checkpoint_segment=3 改为 checkpoint_segment=6

0、这些有问题的餐厅统统加入巡店列表，每天着重跟踪
1、BMP新的数据库备份方式，先上这几家店（特别是QGD095）试试
2、着重分析could not get   JDBC connection的原因，应该和最近修改的epqc夜里的计划任务相关（现在有一些线索，明天着重分析）
3、针对现有的几个已经从日志分析出来的问题（如POS汇总需要加锁机制等），先修改，上到这几家餐厅试一试，看看效果
4、拿几家店作为实验，将以上几个步骤的结论重点在这几家店尝试，找到最终原因


上海-东京：2358（10/22-11/1）直飞
南京-墨尔本：4000（10/22-11/1）全程15小时左右

南京-香港：3933（10/03-10/08）两个大人一个小孩；直飞




1、库存扣减的问题：
	a 王君健刷库，包括了将1GBOH的拆分关系插入；删除31、32；删除epqc的TC交易类型表
	b 根本解决是follow王君健的邮件。
	c 现在已经部署到了TJN472，后续追加的餐厅：TJN259、TJN861
2、性问题的调整：
	a 替换SZH196的epqc.jar
	b 替换SZH196的watchdog.jar
	c 修改Postgre的参数postgre.conf文件中的checkpoint_segments=10
	d 重启Store、计划任务、数据库
	e 现在已经部署到了SZH196，后续追加的餐厅：GZH076、QGD095
3、库存表的锁表问题导致的性能下降：
	a 刘辉先分析现在epqc中对库存表的操作列表，根据此列表我们在详细制定解决方案。
	b 

1、周一要和老陈对一下两张图代表的意思
2、确认一下周一发布到汇金和凯进的hotfix，只有从议文的一个bug，周二汇金和凯进的版本要推向全国。
3、周二发的版本到汇金中要有以上性能优化的几个部分：
	a epqc的两个类（commonService和TempletBase）
	b watchdog的一个类
	c 数据的一个配置文件（要确认一下是否能够这样操作，配置文件是否一致等，postgre数据库是否能够在after.sh里面重启，还有这个重启数据库的脚本是否适合放在全量升级包中呢？）
	d 从议文的两个加锁的类也要上到汇金（pos导入和汇总）
4、周二发版本要确认国庆节王欣让王君健刷到全国的脚本有无加入hotfix中。
5、和王君健以及费翔讨论一下，如果就用现在的临时方案作为永久方案，有何不可；反正后面下发的新的数据沙燕保证正确就行了啊，以前的数据还需要调对吗？关键是一键拉取的问题怎么办？


20151012后续上线工作讨论：
**1、关于acp的完整性检测功能要和王君健确认，并给出答复。
**2、餐厅主档信息的修改：
餐厅基本信息增加一个必填项：是否有对等店，放在主档的第三个tab中。
同时对于主档发布功能做如下修改：
点击“保存并发布后”要校验是否填了是否有对等店（radiobutton，默认既不需要选“是”，也不要选“否”，数据库里是null），如果填了“是”，则判断是否选择了对等店，如果没有选择，则不让发布，给出提示“请选择是否含有对等店并选择对等店”，如果有的话，则保存并发布，然后发一封邮件给该餐厅被认领的IT市场的邮箱（BMP的完整性检查的邮箱）（只针对那些未初始化的餐厅）；如果没有认领，则发给所有的IT市场的邮箱，并给出邮件内网“该餐厅没有被认领，请尽快认领”。一旦餐厅已经完成初始化，就不要发邮件了。
在餐厅列表界面选择餐厅进行批量初始化也要实现此功能，首先判断是否选择了是否需要对等店，再判断那些填了需要对等店的餐厅是否已经配置好了对等店，两者都具备后才能发布。发布后同样针对还未完成初始化的餐厅要发邮件给相应的市场IT。
**4、IMS的上传数据的实验，要应长荣和沈沛对一下并给出答复。
**5、巡店餐厅列表中，只巡那些完成了餐厅初始化的餐厅。所以巡店工具在读取巡店餐厅列表后要再到总部端数据库读取这家餐厅有无完成初始化的flag，如果完成了就巡，如果没有完成就记录没有完成初始化，后续工作就不要做了，但要记录。
**6、巡店评估预估和千次是否正常的规则中，不要使用产品数量来判断，使用如下产品来判断预估和千次是否具有数据：
	二块香辣鸡翅
	新奥尔良烤翅
	一块吮指原味鸡
	葡式蛋挞
	香辣鸡腿堡
	新奥尔良烤鸡腿堡
	老北京鸡肉卷
	黄金鸡块(5块)
	劲脆鸡腿堡
	红豆派
	鸡汁土豆泥
	劲爆鸡米花(小)
	香甜粟米棒
	泰式香辣烤翅
**7、和唐慧确认一下，现在将要实现的预估逻辑中，是否能够兼容缺某一天数据的情况。如果能的话，就不需要check总部端某家餐厅的历史销售数据是否完善（每天都有）：针对月预估，丢某一天的数据还是会导致月预估不准。
**8、和王欣与唐卫兵确认一下天津市场上线的重复出计划的问题。是否就是由于角标重复导致的，并且确认该角标重复的功能修改是否上了汇金店。
**9、和王欣确认一下今天新产品的配方的bug是什么问题导致的：骨肉相连。
10、评估一下新产品和促销活动是否能够在test99上进行测试，目的是保证新产品上市首日一定要有预估和计划。
**11、明天汇金版本推到全国后，crp的版本要发布到汇金，同时加上性能改善的几个方案，发到汇金和凯进的同时还需要发到：shy039、sy1028、qgd095、szh196、gzh076

12、10月21/22 20家 	27/28  20家
13、青岛、武汉 11月份
14、明天升级凯进、汇金、N家性能慢的店。
15、昨天沈国伟发送的邮件列表中的餐厅要尽快加入巡店列表中去。然后按照第5点来巡店。
16、伙伴要将最新的调整过时间先后顺序的计划任务（pos2个，epqc1个）下发到全国。

对外：既有客户如何操作，对新客户如何操作
对内：如何提高效率，人员、管理、技能、管控
从外部看内部，从未来看现在

1、王君健每天都要尝试刷库那些已经完成一键拉取的新店，直到他的一键拉取改造完成后。


1、需求变更的事宜要开始行动了。先整理FBI相关的一系列变更，然后开始讨论。

1、汇金凯进升级后登录的改善
2、几家店的性能问题
3、王君健为什么现形
4、升级程序修改了after.sh执行的顺序，需要伙伴测试
5、升级程序的回调函数优化了调用升级程序的流程，需要伙伴测试

6、重新梳理Linux改造的工作量
7、辣翅的拆分关系不对，要和王君健确认。QGD244


8、找周文宏谈一下饶莎的问题。

9、修改一下jira里面的问题分类。
10、sha219的问题，三个问题？为什么重复、容错、临时解决。：bug已开
11、TJN220的问题，要找到根本原因。：从议文找根本原因
12、库存初始化的问题，要确定到底是不是一个bug：是一个bug，今天推全国
13、PIM的错误数据
14、发步数
15、发李明辉的蒙层；发库存初始化的bug；今天推全国
856的时间条 
16、某一家餐厅PIM的巡店脚本卡死的问题，要让饶莎确认。
17、问问刘辉后来0130执行的怎么样了？

18、戈利下班之前一定要发性能测试报告
19、下周一开完PMO要对一下天津市场上线的问题，周日要准备一下。
20、评估一下我修改的epqc的两个公共方法（特别是按天取模板的那个）是否有什么漏洞，如果修改了是否就取不到了。
=================================1027
21、日常升级现在为什么不起作用了？
**22、周一要发个版本到汇金，至少包括手工紧急升级的界面，但是要和秋野他们确认。
22、要和三个人针对性能优化的几个地方确认一下。

23、知识库要让市场IT能够看懂，很重要，先挑两个来实现。（预估为0）（周四宣布）
24、餐厅端完整性检查的推动，包括BMP的完整性检查。（陈智俊推动）
25、告诉市场IT如何看日志。
26、手工升级和计划任务的冲突要有个方案。
27、消息中心的发送方式要配置元数据。发送对象也要配置元数据，主要规定该种公告配置发给哪些角色。消息的有效期。优先级的配置。消息的标题。消息的发布者（只维护姓名，这类消息不需要回复）。
28、韩娇娇要能起到归纳总结运维case的能力
29、要和费翔确认一下今天出现的SHA477和SY1028卡死的原因。

30、明天一早要提交epqc的代码，然后让王欣测试，然后填写checklist，上CRP。
31、方超明天的修改sop空指针的也一定要上CRP

32、要张秀岭看看1GBOH获取2GBOH预估的数据为什么会翻了两倍？
33、上午问下秋野剩余的变更如何了？	
34、将core包中的两个文件上传到svn中，并填写checklist，同时要让唐卫兵测试。
35、升级相关的bug修改：问一下伙伴这张表的数据是什么时候插入的：bmp_t_store_upgrade_task

36、看门狗在每天2330重启一下计划任务的事情要实施了。
37、备份数据库会有问题吗？
38、明天白天伙伴要测试一下日常升级的问题
39、刘辉的库存相关的表的操作怎么样了？

40、上传Save4...的代码到svn，让唐卫兵尽快测试。

41、打电话回家
42、拿显示器

43、找一下Robert，讨论一下WMI的事宜。
44、SZH070看看性能问题
45、SHY013的预警声音问题。

46、下周开运维例会要讲一下秋野他们等人的回信；意见安排后续的知识库撰写计划，按照王敬发过来的一个列表。

47、我增加了巡店列表TJN068，需要明天早上和戈利确认一下，同时还要确认的是读取巡店编号的规则是什么，应该是不需要读取ip地址了。

48、凯旋的问题，明天要关注一下
49、SHA119的问题，明天要关注一下

50、HZ1086的too many clients的问题，需要考虑是否要将最大连接数改成200.
51、和韩娇娇谈一下
52、agent的版本还需要增加容错性操作吗？

53、总部端生产环境线程过多导致卡死的问题。

54、跟踪一下上周运维会议上人工关闭的那些bug，有没有都回掉了。
55、盯一下韩娇娇，有没有和老査沟通过？
56、下周一要追问一下老査上次剩余的需求变更核对的情况。

57、现在总部端WS和RSC页面功能的剥离也是2阶段框架优化的一个重要内容。
58、和刘辉确认一下现在Store进程中，有多少是通过事务的模式访问库存表的，因为如果是事务模式，就要考虑互相死锁的可能性。
59、要增加两个知识库的主题：餐厅没有切换业务日期的处理；餐厅io过高的临时处理方法。
60、王君健看当前正在执行的语句根本就不靠谱，要找到新的方法才行。
61、让伙伴重新执行一次他所谓的升级，然后将实际的日志给我看（Store的日志，而不是update的日志哦）。

62、和许健沟通好，后面如果需要测试的部分，一定要让戈利知道

63、cdu040的预估问题和shy386的声音问题
fzh013的预估问题
qg1022的核准问题

64、59、要增加两个知识库的主题：餐厅没有切换业务日期的处理；餐厅io过高的临时处理方法。还要加上白屏的临时处理；餐厅反馈库存扣减慢的核实方法 65、凯进店11月16日又出现了colud not get jdbc的问题，要调研一下了。

66、费翔要和leo约一下，下周三之前去下上海。
67、shy057的问题：
	1.shy057挞水效期出错：@方超 
	2.所有解冻pp不出条子，并且追加后所有产品时间条为12月31日废弃：@方超 
	3.产品实际千次没有，无法调：@刘辉 
68、加上刘辉的epqc的pos规整的内容到我的知识库中，并导入jira


69、库存报错的问题一定要解决了：找一家餐厅将事务去掉试试。
70、fzh001、njg371的性能问题的分析
71、总部端性能问题的跟踪，主要是发布
72、框架上select怎么也会用事务

73、运维津贴、知识库总结、几个未完成的问题总结。
74、问问刘辉如何刨根究底的得出pos的扣减时间和epqc的扣减时间的区别

75、要和秋野私下沟通一下，能否安排刘俊波和餐厅进行业务接触--OK
76、总部端生产环境数据库的性能跟踪。
77、尽快敲定需求变更的规则事宜。
78、和靳贵娜确认一下bugfree上的预计解决日期的问题，一定要准。
79、自动化测试平台如何应用到2GBOH，需要确认一下。
80、王君健和费翔关于变更跟踪的事宜要尽快发出去。


bjn192,bjn069,xia055,szn089,sha144，SY1028


81、CDU040的问题，要刘辉确认
82、钮剑说的那个sql语句的问题，看看是不是应长荣的问题
83、问下许建，fnd_t_trans_task表保留多少时间的数据？
84、问下方超我周六发给他的一个报错的问题是什么意思？(报错在第二个tab页)
85、问下方超或者李明辉，一个value too long是什么错误？（报错在第二个tab页）
86、小伙伴看邮件，调整postgre的参数
87、钮剑帮忙安装pg_top

88、修改时间点模板时，将时间点模板的所有缓存清空；或者还是要修改直接缓存时间点模板的内容，而不仅仅是编码
89、看看总部端ds_daemon每10分钟干的事情能否优化。
90、在职证明和用印申请

91、dustbin表也要清理，保留90天，和许健说
92、晚上把资料整理发给刘君波

93、迭代器循环中是否能够执行集合中的remove
94、白屏的问题要写一个知识库
95、调整时间的问题要写一个知识库

96、pos_t_product_sales_amount_temp这张表的数据是什么时候灌进去的？
97、餐厅端高级选项这个一级菜单能否放在最后，而不是插在中间，能否刷一个脚本解决？（王君健）
98、从议文有没有问过老陈说是总部端的close配置没有在餐厅端生效
99、凯进店的事宜追踪
100、看看鲍玉的邮件
101、szh070和szh196的性能追踪

102、知识库统一转移

103、下周要讲的几件事情：
	a 200个bugfree的具体实施模式；还有就是大家可以把bugfree捋一遍，消灭漏网之鱼
	b 每人自己要有个todo list，事情分配给个人了，要能cover住事情才行
	c 认同鼓励
104、调用UPDATER框架来实现更新时，一定要注意更新顺序，到了总部端不一定按照触发的顺序来执行文件的，这点一定要注意
105、凯进店的修改要填写hotfix，尽快上到生产环境了。同时回掉王培培开的几个相关的bugfree
106、关于升级NC的事宜，要尽快和钮剑确认了。
107、王杰要尽快调试他的上传状态的功能。
108、昨天库存刷新为可用的蹊跷事件的追踪
109、王君健要写一个脚本，找到全国所有有问题的餐厅（一键拉取）

110、为什么我们PostgreSQL里面的表永远打不开设计视图

111、确认一下导出离线包到底和性能有没有关系？

112、能否让杨宇放开员工屏的鼠标右键，方便员工屏白屏或者出现异常时能够通过右键来恢复（其他情况依然限制）【分给杨宇一个bug】
113、王杰的那个事务的修改一定要尽快，保证他们的使用体验。
114、那你明天找一家餐厅，将其设为不关注，然后看看是不是无法分配版本和检查更新（严是之）

115、dsdaemon的稳定性
116、小工具的备份恢复功能

117、伙伴要把MB的区别发给Yum

118、周一早上强调一下：加班时间
119、初始化重启DSDaemon的地方是否要改成SSH的模式，是否会没有响应，伙伴一定要测好哦。

120、严勇说xwiki也要和消息平台打通
121、提交最新的excel来说明需求变更的事宜
122、fcst的核准操作总是比较慢的问题，要尽快解决了。
123、whn129的问题，为什么它的版本既不是全国当前认领版本，又不是全国升级版本？
124、RGMServer上的Agent要增加一个功能：看门狗根据agent的最新日志来判断，是否需要重启agent，超过一定阀值（如4小时）就算agent通讯是正常的，也要重启agent。以此来增加agent莫名其妙死掉的应对，增加其稳定性。
125、一键拉取的错误问题？
126、szn213的诡异导入问题，为什么导入计划任务的静态变量部分没有上到生产环境？
128、szn254的性能问题，继续跟踪。szn254的dutytask计划任务我已经停止了。
129、SZN254报的那个错误的问题（nullpointer）
130、szn254的配置校验的问题，王欣要开个bug出来
131、从议文的dutytask的问题，要尽快修改并上到全国。

132、今天晚上我们要做sha386的一键式。
134、本周二上生产环境：
	a 从议文的导入静态变量（最好推全国）
	b 从议文的dutytask的性能（最好推全国）
	c 陶杰的db识别码的修正（最好推全国）
135、sha386的超时时间问题。要赶快看一下。
136、明天追问一下唐卫兵对于epqc数据清理的事宜的准备情况。

137、Agent不稳定的bug都可以关掉了。
138、FBI的几个CheckList都可以发CRP了，其中有一个有脚本要刷，一定要注意填写hotfix。
139、镜像的制作，严是之要确认一下。
140、Agent不稳定的bug也回掉了，如果本周数量不够，这个bugfree可以去凑；同时伙伴要记得测试。
141、PhaseII的架构相关事宜要在走之前和许健沟通一下。
142、fcst当没有任何历史数据时初始化会出错的跟踪。
143、停车事宜。

2016年开始了
144、方超的gzh897的日志为什么那么多？需要跟踪
145、notinitstorecode的问题，要详细看一下xml文件的内容。
146、epqc的出任务的计划任务老是会被锁死的问题，要分析原因。

147、车库的事宜
148、车子年检要买的东西

149、与费翔和杨宇交代一下为迎接storeportal上线FBI需要实现的改造。
150、昨天沙燕报的那个很长的错误。

151：发布订阅的表要收集CASH、IMS、CMS几个系统的总体订阅，要整理一个标准的excel来记录。
152、本地要测试一下cash上线的正式环境。戈利要和cash配合起来测试。
153、数据清理程序要能够支持多个数据库连接，分别轮询不同的数据库，分别清理数据库。

154、和epqc讨论版本适应性的问题哦。
155、报工的url，来报工
156、杨溪了解什么是灰狗。
155、12月份bug修改的排名的东西发一个邮件。
156、回邮件给Yoland
157、周文宏的评优之类的邮件

158、催一下绩效考评的事情，明天要交来。
159、推荐优秀员工等信息
160、张慧英要有一个excel，列出所有机器的部署管理。

161、下周四前要把12月份的运维绩效评价一下
162、cash的升级脚本应该能够被重复执行，因为我们的升级都是全量升级包，所以该脚本应该能够判断是否已经被执行过了，如果已经执行过，则不执行。此点要和老陈确认。
163、方超的出计划的任务不执行的问题要继续跟踪。
164、PIM的表为什么是空的，要问原因
165、升级时第三方接口调用的框架，要设计一下：
	a 在升级程序的最后，加入调用第三方数据升级的统一入口。
	b 将调用的接口和参数以（xxxx.xxx.xx:param,xxxx.xxx.xyz:param）这样的模式写在做包的界面中，并写入做包后的xml文件中
	c 由升级程序最后判断升级是否成功，如果成功，则等待一个超时时间，在超时时间内，通过ds调用Store的WS的方式，固定调用Store的一个通用接口，将以上的参数传入；
	d 这个通用的接口则顺序调用这些传入的类（这些类必须继承通用的接口），并传入相应的参数。调用完成后记录日志。
	e 该操作不作为升级的必须步骤，因此也不影响升级的成功与否，就是升级到最后一步做一下而已。
	f 在餐厅端，建立一张表，记录版本号和调用的第三方接口的记录。每次调用之前，判断一下该版本号的这个接口有没有成功被调用过，如果成功了，就不需要调用；如果没有成功，则调用。
	g 调用完成后，成功调用（第三方实现通用接口的返回为true）则记录到数据库中，当然调用失败也可以记录，方便将来调试。
	h 通过f和g两步操作，实现每次调用的可重复执行，也支持了每次都是全量升级包的概念。
166、黄素英，张秀岭，沈沛，张慧英 没有发给我
167、伙伴要测试抛弃MB的功能是否正常

168、跟踪一下早上说的发布的问题，到底是MQ还是其他问题

169、0112 讨论关于Cash上线事宜的结论：
	a 总部端能够启用Cash的餐厅白名单要有统一的开关，增加一个所有餐厅的编号（编号可以为AllStore，这个餐厅编号最好分品牌），餐厅端调用总部端ws要先判断这个开关，如果该品牌的AllStore存在则说明所有餐厅都是白名单，直接返回；如果不存在，再根据判断餐厅编号来判断是否在白名单内
	b ”启用cash“的链接点击后，需要判断所有的Cash配置项有没有拉完，如果没有拉完，则提示“请至餐厅配置中心进行cash配置项的一键拉取后再启用cash”，用户点击“确定”后页面直接跳转到一键拉取页面；如果拉完了，提示用户“是否确认启用cash？”如果用户选择“是”，就正式启用cash，该链接消失。
	c cash上线需要拉取PIM的所有菜单的全集
	d cash上线的过程，需要在CRP进行测试，可以就用现在cash的独立测试的餐厅，然后拉取某一家PhaseI上线的店（最好不要是汇金店，因为crp已经有一个模拟的汇金店了，如果还用汇金店，可能会导致异常）的数据库做为该餐厅的数据，然后在crp环境中测试cash从无到有的过程。
	e 不在白名单中的餐厅，连正式启用cash的链接都看不到
	f portal的事宜需要再次确认，特别是餐厅端duty的入口
	g kimi明天给出如何判断compris版本的方法

cash的工作流的菜单如何处理，需要确认
启用cash的连接由谁来点击？
餐厅页面需要有返回storeportal功能（包括总部端页面框架也要有这个返回功能）
storeportal登录页面如何拉取总部端用户信息
总部端用户和餐厅端用户登录Storeportal页面到底如何区分？

170、关于StorePortal和现有系统集成的方案汇总：
	1、餐厅端用户在餐厅的使用：用户通过双击RMGServer或其他机器的2GBOH的快捷方式登陆系统，系统依然打开现在PhaseI的餐厅端登录页面，用户输入了用户名密码后，由现在的登录页面完成用户的身份认证（输入的用户名密码和现在相同）。认证完成后，系统按照当前的网络情况实现跳转，当网络能够连接到RSC时，页面跳转到StorePortal，跳转的同时调用RSC的SSO的接口实现SSO登录（调用的是SSO的不需要密码的接口，只需要提供PSID即可，可以参考现在餐厅首页访问OEL的方式）；如果网络无法连接到RSC时，页面直接跳转到原值班管理首页。这里需要考虑如果网络连不上时，是否要等待超时时间会破坏用户体验呢？所以我们是否可以改造成ping通StorePortal的模式来判断。
	同时，StorePortal要提供一个url，提供餐厅的登录成功后访问，将psid和餐厅编号作为参数传递给这个url，这个url的action将psid和餐厅编号传送给sso进行认证（不需要密码的接口），认证成功后，跳转到StorePortal的首页，同时要记录该用户所属餐厅到内存对象（或者reddis中）。方便以后餐厅的功能页面的跳转。
	2、餐厅端用户在非餐厅环境使用（包括office，互联网等）：用户通过直接访问StorePortal的url来实现访问，StorePortal的首页判断用户是否已经登陆，如果还未登录，将页面跳转到SSO的登录页面，用户输入自己的psid和对应的密码（这里的密码不是餐厅端用户修改过的密码，而是总部的SSO保存的强密码）；SSO完成认证后，页面跳转回StorePortal的首页。
	3、总部端用户在餐厅环境的使用：同1。
	4、总部端用户在飞餐厅环境使用（包括office，互联网等）：同2。
	5、StorePortal首页中，应该包括如下快捷入口：访问餐厅、CASH、IMS、CMS....；其中CASH、IMS、CMS都是跳转到总部端的相应模块的一级菜单的入口；而访问餐厅则是跳转到餐厅的Duty首页，即现在餐厅登录后访问的首页。
	6、针对总部端用户登录StorePortal后，点击访问餐厅链接，首先弹出一个餐厅选择页面，被选择的餐厅列表是根据该总部端用户的餐厅行权限所具有有权访问的所有餐厅列表，用户选择了某一个餐厅后，跳转到该餐厅的Duty首页。
	7、StorePortal访问某一个用户的行权限餐厅可以直接连接2GBOH的数据库访问，不需要再同步数据了。
	8、餐厅端要有一个框架可以让第三方通过页面跳转的方式打开餐厅端具体功能的页面，可以让StorePortal上一个连接点击后，通过以上第二点实现模拟登录后，可以直接跳转到某一个具体的页面（如Duty首页等）。

180、是否只有PHDI有这些移动端的需求，还是全品牌？
181、AboveStore用户也需要通过移动设备来查看功能？
182、邮件中描述的5.5寸手机，指的是任意品牌的手机还是固定品牌，固定系统的手机？是否需要支持跨设备，跨系统的用户体验。
183、同时邮件中又描述了餐厅外访问的个人手机，那么是否要支持所有品牌、尺寸、分辨率、操作系统的手机？
183、在手机上通过什么入口来获取PPT中描述的功能，是手机浏览器、Native App、微信，或者其他？
184、手机上的认证模式是什么？是传统的用户名密码？还是与微信或其他账号绑定的单点登录，或者其他某种模式？
185、邮件中提到的在餐厅外使用个人手机通过公共网络访问，那么仅仅指的是访问AboveStore，还是连Store内的功能也要能够通过公共网络访问到？
186、在公共网络内
187、手机的提醒一般都是通过手机消息推送来完成的，那么PPT中提到的各种值班提醒、异常提醒等功能是否都要做成基于手机消息推送的模式？不同的系统和应用的模式具有不同的推送方法，我们是否都需要支持？另外就是是否需要和我们的消息中心集成？
188、PPT中提到的功能和现有E-platform中实现的功能关系如何？或者与E-platform本身关系如何？
189、可以移动的手机，操作是方便了，但是带来的另一个问题就是安全问题，如果员工手机丢了或者由于某种原因被误操作了，我们如何处理，后台是否要有一个安全机制来保证数据、信息的安全性？如通过手机验证码、手势密码、指纹验证、设备报失挂起等各种方式来保证百胜内部数据的安全与可靠。
190、移动设备，自然会涉及到MDM的概念，既然有BYOD的想法，我们是否要建立一个完善的MDM平台来管理员工的设备，以及通过这些设备的管理进而既能实现移动办公的便捷，又能保证数据和操作的安全。
189、既然是手机，自然具有一些PC（或NC）不具备的优势，如定位、语音、视频、二维码扫描等，我们是否需要考虑利用这些优势为PPT中提到的功能带来更好的用户体验？如
	a NC上的留言只能是文字留言，而通过手机则可以方便快捷地实现语音留言；
	b 排班调拨人力时，可以实时显示该员工与餐厅的距离，为更快速的人力调配提供参考
	c 某些关键值班工作，如清洁检测等可以通过拍照或视频存档以备将来实际检验
	d 将来IMS的库存盘点，可以通过手机扫描二维码的方式定位批号，而免去输入的麻烦
	e 等等等等....


190、计划任务容器中，有一些日志有问题，就是出计划的任务，获取缓存的地方。
191、FCST的预估总是为0的问题，我们要梳理一个问题清单，尽量以后避免同类问题出现。
192、MQ的订阅模式，我们要尽快改变了。
193、问秋野一个问题，第二批餐厅的问题。
194、发邮件说明我们分析RSC3的问题。
195、回Yoland的邮件
196、自动化测试平台的模式和计划要确定。
197、Yoland的邮件（Mobile）和钮剑的邮件（MQ的修改）

198、总值班的事宜安排一下。epqc和总值班

200、测试对于开发的意见：开发提交测试前，最好自己充分测试完成。
201、下周一谈话：
	a 考勤问题
	b 

202、王君健的收放自如的工作量确认本周二之前要发出去。	
203、要将所有的和性能测试相关的功能整理好一份，方便跟踪。

2016年后的事宜：
**1、张艳艳要确认对于那些版本非常老的餐厅（没有餐厅正式启用功能的餐厅）就会连phaseI正式启用的两行prop文件都没有，那么我们上了新的正式启用框架，如何应对：针对有PhaseI的正式启用flag为Y的以及老版本的没有这个flag的场景，同样处理。
2、饶莎和老陈要针对新的Agent进行测试，测试706和708两种场景下的适配性：
	a POSUser对于compris注册表读取的权限
	b 反射是否能够初始化不同的COM接口
	c 其他正常的pos接口是否能够使用
**3、epqc的预估任务的逻辑是否能够改成这样：预估多天（5天）的数据，当第二天如果预估失败的话，就拿之前预估的结果作为结果出计划，但是可以报一个警告出来；这样可以避免晚上只要一失败就需要人为运维的窘境。需要讨论
**4、关注一下shy073总是会内存溢出的问题，似乎是一个30分钟左右的计划任务会导致cpu占用过高
**073的问题是不是epqc的pos规则的问题，需要确认：
Message :	null~null售卖信息：[]
**5、SHY073的cpu占用一定要好好跟踪，计划任务后台有一个隐藏的很深的问题。
**6、GZH076的问题是数据库备份的时候硬盘空间被占满了，导致没有空间备份数据库，导致数据库停止响应，我已经临时删除了一些问题件
但该餐厅要重点监控，定期清理硬盘数据。
最好将这家餐厅的保留日志、文件的时间改为3天，而不是30天（许健）
**7、年后要研究一下数据库备份的问题，到底哪些文件需要拷贝，哪些不需要，不要都拷贝，数据量太大，搞不过来了。（费翔）
8、每次发餐厅端生产环境时，都要记录版本和reversion的对应关系。方便将来回滚哦。最好是每次打hudson并上传版本时，在上传版本的记录里面记录一下svn的切面reversion号。（靳贵娜）
9、SHY073发生的异常（pos5吐出了异常的xml文件）我们是否要做更多的容错性考虑，以适应将来不同的情况，而不是一出现这种问题整个平台就全部崩溃（如内存泄露等）
10、伙伴要开始测试新架构的MQ了。
**11、CHS的计划任务进程占满的情况分析
12、登录的SSO逻辑是：在Portal页面上有一个iframe调用了一个ssologin的action，该action将用户id传递给了总部端的ws，该ws实现登录，关键是总部端的页面是否在cookie中做了什么操作呢？我就不得而知了。
要记录一下如下语句的返回值是什么：
str = securityService.loginBySso(ssoInfo);
还要看看总部端的那个ws的操作模式是什么？

有点意思：http://e.jikexueyuan.com/python.html?hmsr=cnb_banner_python_09.14

13、方超的逻辑需要考虑的异常场景：
	a 如果在达到阀值出了计划后，物料拆分完成如何处理？这里还是要重新出计划的。所以要在出计划的任务类中增加一个内存变量，记录该计划是由到达阀值以后的场景出来的，而并不是正常出来的；而每次执行出计划的任务时，都需要先判断该内存变量是否被置位，如果是，并且计划已经出完，同时拆分标志又是正常的话，则重新出计划，出完计划后将该内存变量置回来。（该内存变量默认是置回来的状态）
	b 基于a的考虑，我们还要考虑计划任务容器被重启，也就是内存变量被重置的情况下，如何处理计划？所以每次五分钟执行出计划任务的动作时，先判断拆分关系是否异常，同时计划是否已经出来，如果都是true，则将状态置位。同时进入a的流程。
	c 也就是状态分为如下几种：
		i 拆分标识正常、计划正常已出：0（正常状态）
		ii 拆分关系还未置位、计划正常已出：1（异常状态）

14、下周讲的事情：捐款的事宜。
15、下周将StorePortal的Story的计划和内容发给Yoland
16、伙伴要测试相关内容：StorePortal的跳转和登录，以及返回StorePortal等功能。
17、周末运维的要解决的问题：
	a TJN858的值班达成率报表为零
	b BJN481补下3月8日的数据
	c 刘辉看下拆分置位完成后，为什么备份数据需要那么长的时间？
18、白名单的功能为什么会上汇金店，以及张艳艳的图片之类的事宜。

19、本周陈智俊要统计运维津贴的事宜，1月份的，和12月到底有没有统计的问题。
20、确认认同鼓励的人员的事宜。
21、跟踪一下锁表的处理情况。应长荣的数据处理程序的测试情况。
22、饶莎本周要再测试一下Agent的问题。

23、下周晨会的时候宣布认同鼓励
24、为了github工具的修改

id:guest-9243373
pwd:nchb3156

25、PMO会议结论：
	a StorePortal的框架和登录部分算作StorePortal的工作量，而衍生出来的其他部分算作各个模块的工作量，可以通过需求变更的方式来获取资源。
	b 我们回去核对非框架的工作量。
	c 对于一些餐厅cpu高和慢的跟踪和处理
	d 餐厅端性能问题的跟踪（周末找个时间跟踪一下）

**26、和邓宇沟通一下关于跳转页面不使用图片的问题。
**27、周一早上分析一下SZH196的现状。为什么预估要那么久呢？
*28、szn105的核准怎么会突然变成未核准呢？
*29、NJG102的POS集成的问题，Agent调用Compris的接口都是返回的脱机，但是用Compris的ACTIVEX返回的却是联机，不知道具体的情况了！
*30、分析一下现在初始化完成是通过什么方式将初始化状态上传到总部端的，是ws和mq，还是只有mq？
31、性能测试环境的跟踪。
32、秋野的邮件，Yoland的邮件
33、跑马灯、根据网络来划分显示portlet、消息中心支持置顶
*34、戈利要发一封邮件给秋野，说明计划任务补偿平台的测试用例
*35、小伙伴要发应对mq崩溃的方法
*36、按照餐厅的单位发出卡顿情况的处理状态(国王)
*37、发邮件给郁东风
38、Yoland的StorePortal的工作量和计划预估。
*39、MobileDuty：PhaseI（Dashboard KPI Checklist，RVR记录 值班记录）；PhaseII（除了PhaseI以外的功能）
*40、补充陈栩的邮件
*41、Duty的Dashboard在SP上的展现，如何排入计划
*42、李园周一要看一下StorePortal网络不通的时候的场景是否符合测试结果，Yum开了一个bug过来，发现网络不通的时候没有调回Duty首页，而是依然跳转到StorePortal了
43、和文宏确认一下StorePortal的资源，以及DutyMobile的后续事宜。
*44、Duty Mobile的设备的机会！
*45、和应长荣对视图的分析
46、许健的工作交接
47、性能测试相关
**48、3/7晚上停止NJG102和QG1022的数据上传计划任务。
**49、Updater的sql语句执行规则，要看一下
**50、StorePortal的计划要大致排一下（Duty部分的计划，按照从6月份开始）
*51、Duty Mobile的框架部分工作量要重新排一下。
*52、找一下Yum的部署文档，发给郁东风。
**53、性能问题后续跟踪：
	a、经过分析和客户的确认，决定对NJG102和QG1022两家之前报高峰期有卡顿的餐厅采取停止报表数据上传计划任务的方法，初步决定停止三天，在这三天中实时跟踪其性能和卡顿的情况，并实际致电或者直接到餐厅去了解卡顿情况的缓解效果，根据反馈评估停止报表上传计划任务对于卡顿情况的影响。停止时间：3月7日晚上23:00
	b、决定对于之前出现预估卡顿性能问题的SY1028的餐厅实施修改业务时间的方式模拟3月1日凌晨的预估任务，同时评估预估的性能卡顿问题能否重现。模拟时间：3月7日晚上23:00
*54、NJG102的pos导入计划任务又出现了计划未执行完的提示了；这个计划任务还是要加入一个超时的阈值
*55、UPDATER的执行机制是否要修改一下，要和王君健讨论一下。
*56、看一下NJG102的POS导入是否已经正常了？
*57、和周文宏确认一下SP的资源问题。
*58、打电话给QG1022和NJG102的餐厅，看看卡顿事宜的进展

59、2016-3-11巡店NJG102的结论：
	a 餐厅自从本周以来，性能没有出现任何问题，日常操作都比较快，POS也没有出现卡死的情况；最后一次出现卡顿是周一中午，而我们是周一晚上停止的数据上传计划任务的，所以现象基本和处理的结果一致。
	b 该餐厅之前也没有报过和POS相关的卡顿，就算2GBOH出现卡顿时，POS机并没有明显的卡顿现象。
	c 从现场的操作和长时间观察来看，epqc所有的操作都没有出现任何卡顿，倒是值班管理的预警列表有一次出现大约20秒才刷新出结果的情况，据餐厅反应，这样的情况之前也会出现。另外有卡顿的就是值班管理的首页中刷新千次追踪产品的部分，大约会20秒才能刷出来；但这个问题是由来已久的性能问题，已经开了bugfree给从议文进行修改了。
	d epqc的追加页面的品项选择是否能够使用缓存，而不是每次页面进去都要从数据库中刷新，因为这部分品项的内容其实变化不大，并不需要每次都从数据库中获取，又或者从业务层面看看有没有优化的空间；该页面最终用户使用的非常频繁，如果每次都要刷新查询品项的话，操作体验就会大打折扣。
	e 该餐厅的TC预估很准，但是TA预估反而非常不准，不知道是什么原因。
	f epqc的计划都是半小时出一次，但有些物料在半小时时间到之前就已经断货，只能通过人工手工追加，这样操作的工作量较大。高峰期能否加快出计划的频率，以保证不断货。
	g 库存通常不准，原因有二：
		i 到期提醒或者损坏出现在页面上时，员工通常不录入实际的损耗，或者服务组并不了解实际的损耗，通常都是直接把窗口关闭或者随便录入一个数字，这样就会导致实际的库存越来越不准。
		ii 之前积压的库存不准的情况会越积越多，原因多种多样，有可能是pos导入不及时或没有导入，也有可能是到期提醒和损耗没有正常录入；但是只要有一次不准，这些不准的数量就会越积越多，导致最终的库存通常都不靠谱。
	h 总部端配置的物料制作时间往往对服务组的要求较高，通常服务组的新手较多，无法达到总部的制作时间的要求，就导致实际制作出品项的时间大于epqc预估的时间，导致epqc总是会弹出到期提醒，而实际品项却并未到期，导致实际到期和理论到期时间总是不符，导致到期提醒的录入不靠谱，久而久之大家就不相信到期提醒这个功能了；这样自然就会导致了g.i中描述的原因。
	i 存量控制计划还是无法满足高峰时期的售卖，需要评估存量控制计划的预估逻辑。
	j 由于库存通常不准，导致出的计划通常需要人为修改数量或者人为追加数量，反而是增加了值班经理的工作，并没有起到降低生产控制工作量，提高工作效率的作用。
	k 整体的生产控制管控过于精细化，每一步都有详细的计算和控制，理论上如果按照这种控制和计划是可以非常精确的完成制作；但是系统并没有考虑到人在其中的一些意外因素，一旦由于一些意外导致制作量或库存不准，这样的意外就会一直放大到整个制作过程，除非重新执行工作量较大的校准库存工作，否则就会导致后续的计划始终不准，而需要人为调整和追加，完全失去了计划预估的目的，反而增加了人为的工作量。
	所以这样精确的生产控制模式是否适应于人为干扰因素较多的餐饮企业，是一个非常值得深思的话题；如果连标准化和训练做的如此精确的百胜尚且如此，那么其他二流的餐饮企业又会怎么样呢？

13965384568 赵明

性能问题跟踪：
a、SZH196，经观察，近几天都是早上0930左右才完成所有的预估工作，而经过分析，该餐厅由于夜里0015执行的数据库备份的计划任务近今天平均也都要花到7个小时才能做完，完成时间大约都是早上0859左右。
从备份的数据库来看，备份后的文件大小约为6GB，从LinuxServer拷贝到RGMServer的时间是50分钟，可以计算出io拷贝的速度是2MB/s，但当时由于epqc也在做预估操作，对io占用也很高，所以不确定是不是这家餐厅的硬盘确实有问题。
但是能够肯定是，数据库的备份工作影响到了夜里的各项计划任务，导致了现象上的性能较差。
b、针对NJG102、QG1022的问题，可以肯定夜里的io没有问题，只是白天对于cpu和io占用（LinuxVM）比其他餐厅略高而已。
进过分析：  


*60、需求变更的汇总文档，要再找靳贵娜确认一下。
*61、ws的一键拉取的脚本，要在代码中来写哦
*62、生产环境数据库的恢复工作
*63、发一封邮件给Yoland和飞哥，说明Portal无法合并单元格的事宜。
*64、莫名其妙的io占用很高等问题还是要分析和彻底解决。
*65、本周要发一封长邮件给百胜。
*66、准备一个PPT，总结我们在5000家店上线过程中的系统准备工作
*67、和王君健讲循环脚本的事宜
*68、问王杰几个问题：（很长的字符串要不要加前后两个“）（最后一个参数是否可以随便瞎填一个？）
*69、HZH277和CDU040的性能跟踪（epqc的预估计划任务）
*70、下午两点看一下hzh277和cdu040的epqc计划执行的情况

*71、未来rollout的版本发布流程：
	a、第一周：润和本地开发测试；第一周结束提交给百胜Release版本；第二周做hotfix验证，在第二周之内可以随时发布crp修复测试过程中的bug；
	b、第二周的周五，samuel会回馈大家结果；第三周进行回归测试，周五会给出测试报告，决定哪些bug上环境；第四周下到汇金店，或某个市场；第五周推到全国
	c、第三周回归测试如果有问题，就casebycase来评估是否周末发布到生产
	d、问题如下：
		cash如何处理：汇金始终做为cash的测试环境
		报表怎么处理：follow现在的流程
		推到全国不经过某一个或两个市场吗：由市场IT自主决定
		周五给出列表，周几发布版本：CRP周三发，生产环境周三发
		版本后续谁来发布：市场IT发布
		推广策略是否和现在一样：汇金不断更新，全国版本完成回归测试后再更新
		何时开始实施：后续再确定
*72、很陈智俊沟通一下先做UI的可能性（SP）
*73、提醒伙伴改ssl的路径
*74、晚上更新一下StorePortal的计划，发给Yoland

*75、下周要找许健、陈林峰过一下后续计划
*76、和戈利沟通清楚，contrller的并发是by vuser的，但是每个vser是不会参数化的哦。同时要记得去掉事务
*77、应长荣加updatetime索引的事宜，需要跟踪。
*78、fcst的事务去掉的事情要尽快跟踪。

*79、下周一问一下那个菜单到底是怎么个意思？下周一需要讨论什么？
*80、月预估慢的最终结论是什么？
*81、Controlcall的事宜，要和文宏以及智俊宣讲
*82、Yoland说的StorePortal的性质事宜，要和文宏说一下。
*83、订单中心，DS Enhancement的事宜，要和陈智俊说一下。
*84、许健的工作和交接情况，要Review一下，就以上次交接的excel列表为准。
*85、杨溪的自动化测试平台我们要review一下哦。
*86、关于运维津贴和新的运维体制的事宜。
*87、版本的问题的事宜。发邮件给秋野。
*88、APEC签证的事宜
*89、费翔要把FBI的几个bug的更新计划给韩国王
90、几个epqc的计划任务的优化工作
*91、SZN268的性能跟踪
*92、四家餐厅的数据库瘦身的实施
93、全员宣布一下，在总部端对于内存变量的处理，如果需要使用flag这种类型的变量，必须使用redis（我们已经有了通用的接口），而不是使用类里面的static变量（特别是对于那些需要通过静态变量来判断状态的场景）
*94、郁东风的邮件的回复
*95、帝庭店升级失败的排查
*96、餐厅的性能问题要加一个完成时间
*97、SZH190的性能跟踪
*98、发一个九珍果汁的邮件给百胜
*99、许健看一下编译不过的问题（storeportal）
*100、四十三家店的预估的问题。（观察NJG102）
*101、QGD353的POS扣减慢
102、月预估的优化的事宜。需要跟踪，要盯着从议文
*103、HZ1038的COMMON参数莫名其妙就没有了，要追踪。
*104、MQ链接缓存的事宜要尽快修改，已经修改完成，伙伴要尽快测试。
105、总部端登录的性能问题，以及锁表的性能问题，需要好好分析一下。
*106、CRP和生产环境要尽快换成tomcat
*107、严是之把周末mq的原因写给钮剑
-Xms32m -Xmx96m -XX:PermSize=32M -XX:MaxPermSize=64M

月预估逻辑的优化：
如下是我根据详细日志总结的需要优化的月预估逻辑，请评估一下，务必要在5月1日月预估之前能够完成哦：
1、优化initFcstMapper.deleteInitPeriod(algorithmList);【InitFcstPrepareService】
	a 将分算法删除FCST_T_INIT_PERIOD_FORECAST表中的数据模式改为一次性全部删除（如果业务上允许的话），甚至直接truncate表。【不仅包括Period表，是否还应该包括Day表？】
	b 如果无法做到一次性全部删除，请将这个方法的删除模式从临时表的方式改为子查询或者not exist之类的方式，优化其单次执行时间。
2、InitFcstSavePeriod.doHandle(final AlgorithmParam algorithmParam, final FcstResult <?> fcstResult)
	a 该类的doHandle方法里面将匿名临时类改为正式类，将数值通过参数的方式进行传递，不需要通过匿名的方式进行传递。
	b 将第67行的BatchSaveHelper <InitPeriodForecast>(callBack, periodFcstList).batchSave(FcstConstants.SIXTY_CONSTANT);的参数从60改为600，提高一次性传入的数据量；但要注意的是一定要做好测试，不要出现超过mybatis的最大允许字段上限的情况。
3、InitFcstSaveDay.doHandle(final AlgorithmParam algorithmParam, final FcstResult <?> fcstResult)
	a 该类的doHandle方法里面将匿名临时类改为正式类，将数值通过参数的方式进行传递，不需要通过匿名的方式进行传递。
	b 将第56行的BatchSaveHelper <InitDayForecast>(callBack, periodFcstList).batchSave(FcstConstants.SIXTY_CONSTANT);的参数从60改为600，提高一次性传入的数据量；但要注意的是一定要做好测试，不要出现超过mybatis的最大允许字段上限的情况。
4、把预估的计划任务模式从多线程改为单线程的模式，方便跟踪和优化管理。

总部端性能跟踪：
1、with tree(PARENT_DEPT_ID,PARENT_NODE_DESC,DEPT_ID,NODE_DESC) as ( select PARENT_DEPT_ID,PARENT_NODE_DESC, DEPT_ID,NODE_DESC from DP_C_ORG_TREE WHERE DEPT_ID in ('null') union all select t.PARENT_DEPT_ID,t.PARENT_NODE_DESC, t.DEPT_ID,t.NODE_DESC from tree, DP_C_ORG_TREE t where tree.DEPT_ID = t.PARENT_DEPT_ID ) select u.EMPLOYEE_NAME, u.NATIONAL_ID, u.GUID, u.WORKING_ID, u.IS_DISABLE, u.RANGE from DP_C_USER u WHERE (u.DEPTID in ( select distinct r.DEPT_ID from tree r) or u.Y_TAS_DEPTID in ( select distinct r.DEPT_ID from tree r) or u.DEPTID in ('null') or u.Y_TAS_DEPTID in 
这个脚本到底是什么地方执行的？
2、update User这个脚本是什么地方执行的？
3、登录的锁表和负载跟踪优化。
4、报表平台的综合关联分析。
*5、餐厅FormalStart有两条记录的问题
*6、MB现在还是有数据的问题
7、总部端应长荣的RemoteLogin的问题。

1、psh090的性能问题，需要评估为什么一直就要到早上10点epqc的预估才能跑完。
2、总部端登录功能的修改，需要把餐厅登录总部端的更新用户表的功能去除；包括也要去除登录成功时的用户表更新（需要基于更新的几个字段现在都没有实际作用的前提哦）。已经修改完成，需要后续测试和跟踪。
3、明天早上看一下PSH090和GZH076的5天预估用时。
4、还是要在一些老大难的餐厅增加2330计划任务重启的机制（放在看门狗中实现）
5、看门狗每天夜里2330进行重启的事情已经改好，要伙伴测试一下。
6、UPDATER程序的修改。

7、严是之要poc一下nginx的反向代理
8、跟踪一下SY1028的值班管理首页的汇总慢的问题。
9、从议文看看那个奇怪的sql。
10、从议文要优化汇总预估和实际销售的代码，需要跟踪哦。
11、明天早上要跟踪CDU040和CHQ010的性能，看看epqc有没有跑完。

原因是：1、工作流内容配置错误，2、餐厅没有获取最新配置项，3、时间点模板配置错误。
解决方案：已提供知识库给YUM
12、SHY868和SY1028的问题
13、黄来顺下发的kfc配方的数据的跟踪
14、SHA119的问题，从议文会不会已经忘记了。
15、PSH090的跟踪
16、钮剑的fcst上传的工作，要跟踪从议文给我们一个视图和数据量大小的评估。
17、明天要确认一下gzh076的epqc执行的时间点的问题
18、周一让应长荣看一下餐厅端的那个很大表的数据有没有被清理掉（餐厅端汇金店）
19、伙伴要测试异常的DSDaemon的场景。
*20、周一要提醒百胜这是五一前的最后一个星期了，最好本周要推一次全国，这样才能保证五一的fcst的月预估性能优化可以起到效果，否则五一休假如果碰上需要人工处理月预估的问题的话，就比较麻烦了。
*21、从议文的月预估试验。
22、计划任务重启的时间点的修改。（周二发生产）
23、王君健拉一下下发餐厅的列表。
24、各个启动sh的nohup路径的修改。（周三上CRP）
25、SZH196的数据库备份计划任务被关掉了，需要注意哦：可以定位就是数据库备份的影响
26、postgresql数据库要从自动vaccum改为手工vaccum的模式。
27、GZH076的autovaccum被我关掉了，明天要观察一下效果哦：可以定位就是数据库备份的影响
28、SZN061的问题，取大钞已经关闭。
*29、回邮件，全国下发的问题。
*30、SZH070也是io过高。应该也是数据库备份的问题。
31、周四下午两点执行QGD095的400张表清空：
	a 执行王君健的400张表清索引的操作
	b 执行单表vaccum
	c 执行全库vaccum
	d 分别记录时间和数据库所占大小
32、王君健要提供两样东西：
	a 早先7家店和QGD095的400张表的数据量大小的对比
	b 还有哪些表可以清理的列表，以及和业务核对后的结果。
33、刘辉清空200张表到底是truncate还是delete，需要确认。
34、数据库的一系列事宜需要确认：
	a 缩库的机制（自动->手动）
	b 400张表的缩库操作
	c 还有哪些新的表可以清理的
	d 数据库备份的机制的深入研究
35、连接被用尽的问题，刘辉需要分析。
36、8家店的200张表的对比，刘辉需要分析。
37、陈智俊的epqc数据规整的任务调整到2345，而不是放在0015.
38、review一下刘辉修改的jdbc的地方。
39、陈智俊周五早上确认一下SZH196的epqc规整数据是否正确，如果正确，则修改过计划任务的执行时间后全国下发。
40、早上看下三样东西：
	a szh196的epqc规整是否正常
	b NJG061的预估结果
	c 

停止了数据库备份的餐厅：
CHQ010、SZH196、GZH076、SZH070

41、5月1日监控的餐厅：
	NJG102.新世纪
	SHA144.牡丹江
	SHA491.芮欧店
	GZH076.新世界
	TJ1008.天鸿店KFC

*我刚才发现总部端有一条“正在升级”的记录，餐厅端就总是获取不到状态了，这应该还是有问题的。
同时，我将总部端正在升级的那条记录取消后，总部端的指定版本就变为空了，餐厅端也无法更新版本了。
这里的设计还是有问题的，你节后开个jira出来：
1、总部端存在“正在升级”或者“未下载”等中间状态的分配记录时，如果餐厅端重新检查更新了，应该如何操作，不能让餐厅端页面永远等死。
2、总部端一旦取消一些无法升级的任务后，该餐厅的分配版本不能变为空，而应该保留之前分配的版本。

劳动节：
*1、我刚才发现总部端有一条“正在升级”的记录，餐厅端就总是获取不到状态了，这应该还是有问题的。
同时，我将总部端正在升级的那条记录取消后，总部端的指定版本就变为空了，餐厅端也无法更新版本了。
这里的设计还是有问题的，你节后开个jira出来：
	a、总部端存在“正在升级”或者“未下载”等中间状态的分配记录时，如果餐厅端重新检查更新了，应该如何操作，不能让餐厅端页面永远等死。
	b、总部端一旦取消一些无法升级的任务后，该餐厅的分配版本不能变为空，而应该保留之前分配的版本。
*2、NJG061的预估结果如何？效果很好，从原来的
3、王敬说的什么没有库存核准按钮的问题。
4、月预估的问题。
6、已经优化的餐厅的月预估的平均执行时间。
7、5月2日晚上要执行将之前结果为1的餐厅
8、achive_on
9、如下语句是在干嘛：
		WITH ALG AS (
             
       
        SELECT 
            'GZH076'::TEXT AS STORE_CODE, 
            '23'::TEXT AS ALGORITHM_CODE_SALES,
            '25'::TEXT AS ALGORITHM_CODE_TC
      
               
        ),
        TEMPLATE_CODE AS (
                 
       SELECT
          DAY_LIST.STORE_CODE AS STORE_CODE,
          DAY_LIST.TEMPLET_CODE AS TEMPLET_CODE
       FROM 
          V_STORE_TEMPLET_DAYLIST AS DAY_LIST
       WHERE
         
          DAY_LIST.SCC_DATE = $1
     
                AND DAY_LIST.CONFIG_TITLE_CODE = 'FCST_TRANSACTION_TYPE'
           ),
        PERIOD_SALES AS (
           SELECT
              P.GUID AS GUID,
              P.STORE_CODE AS STORE_CODE,
              P.FORECAST_DATE AS FORECAST_DATE,
              P.START_TIME AS START_TIME,   
              P.END_TIME AS END_TIME,
              P.TC_DEAL_TYPE_CODE AS TC_DEAL_TYPE_CODE,
              P.TC_STATUS_CODE AS TC_STATUS_CODE,
              P.ALGORITHM_CODE AS ALGORITHM_CODE_SALES,
              P.MANUAL_ADJUST_SAL

*1、明天早上看下昨天晚上上了刘辉版本的epqc.jar的文件有没有产生效果
*2、明天早上监控汇金等五家店200张表删除数据的情况。
3、严是之要调研的WAL备份的事宜
4、王杰/王君健的自动vacuum转手工vacuum的事宜。

1、TJN170的epqc的问题：方超		完成
2、TJN384的挑勾的问题：从议文	
3、KHN035的MQ问题：严是之		完成
4、Samuel的CRP环境没有预估的问题：花琴	完成
5、PSH090的pos曲线：王君健		完成
6、NNG046  有一条5.2日的历史炸油预警未删除，请协助删除冗余数据：花琴	完成
7、DGB214  6月的所有预估都为零  请协助查看：花琴		完成
8、QGD095 FCST已核准界面提示未核准 问题收到，我们看下：花琴		完成
9、@润和-BOH2G客服 GZH291 炸油预警4月的冗余数据请协助删除：花琴	完成
10、PSH090的一键式EOD/SOD没有确认或者取消按钮，务必保证今晚能够执行：从议文		完成
11、WHN183  进2g生产计划里面点击保存就弹出系统异常,请稍候再试，请帮忙看下：鲍玉	完成
12、TJN074餐厅达成率报表全为0：应长荣		完成
13、WXI057 一键获取配置界面报错：王君健		完成

11、明天早上从议文要看一下PSH090
12、明天早上看一下QGD095，我已经停掉了数据库备份的计划任务
13、明天早上看一下GZH076

14、PSH090的预估时间分析
15、明天早上看一下PSH090的预估
16、PSH090的数据库备份任务已经停止了
3、data库的Postgresql的迁移事宜：
也是如我们上周所讨论的，我本周会和花琴对一下这个库里面的数据的根本目的，然后根据这个目的再来制定优化这个库的方案，这个方案我本周给出。
4、应长荣的数据入库优化的方案
5、data库的缩库方案，已经给出，但是要确认和实施。
6、周一和应长荣和陈智俊对一下新的删除数据的方案
7、有一个消息中心的表，要配置定期清理。
8、戈利要测试一下王君健的主档信息。
9、明天早上看看SHA386的情况
10、今天升级全国版本的脚本事宜
11、计划任务的“停止”问题
12、SHA386的两个问题是否解决了？

13、在web.xml里面增加：
	<servlet>
		<servlet-name>UpgradeAppInvoke</servlet-name>
		<servlet-class>com.yum.boh.bmp.task.versioncheck.UpgradeAppInvokeTask</servlet-class>
		<load-on-startup>3</load-on-startup>
	</servlet>
	<servlet-mapping>
		<servlet-name>UpgradeAppInvoke</servlet-name>
		<url-pattern>/services/UpgradeAppInvoke</url-pattern>
	</servlet-mapping>

